$(document).ready(function(){});var ajaxPost=function(e,t,a){$.post(e,t,a).done(function(e){}).fail(function(e){})},toggleDisabledButton=function(e){$(e).is(":disabled")?enableButton(e):disableButton(e)},enableButton=function(e){$(e).prop("disabled",!1)},disableButton=function(e){$(e).prop("disabled",!0)},alertPop=function(){$(".alert").addClass("pop")},resetForm=function(e){$(e)[0].reset()},getInputVal=function(e){return $("input[name='"+e+"']").val()},setInputVal=function(e,t){$("input[name='"+e+"']").val(t)},getRowCount=function(e){var t=$(e).children().length;return t},getItemCount=function(e){var t=$(e).children().length;return t},toggleModal=function(e){var t="#"+$("#"+e+" form input").first().attr("id"),a="#"+$("#"+e+" form").attr("id");$("#"+e).is(":visible")?($("#"+e).fadeOut("fast"),keepModalOpen()||toggleKeepModalOpen("#keep-open-box"),resetForm(a),$("#body").css("overflow","initial"),$("#modal-overlay").fadeOut("slow"),$("#"+e).find("#error-message span").fadeOut()):($("#modal-overlay").fadeIn("fast"),$("#"+e).fadeIn("slow"),$(t).get(0).focus(),$("#body").css("overflow","hidden")),$("#modal-overlay").attr("data-modal",e)};$("#btn-modal-close, #btn-modal-cancel, #modal-overlay").on("click",function(){var e=$(this).attr("data-modal");toggleModal(e)});var toggleKeepModalOpen=function(e){function t(e){"check_box_outline_blank"==$("#keep-open-box").text()?($(e).attr("data-keepOpen","yes"),$("#keep-open-box").text("check_box")):($(e).attr("data-keepOpen","no"),$("#keep-open-box").text("check_box_outline_blank"))}t(e)},keepModalOpen=function(e){return"check_box_outline_blank"==$("#keep-open-box").text()},editSuccess=function(e,t){var a=$(e).parents("div").find(".modal-tarp");a.fadeIn("fast"),resetForm($(e)),setTimeout(function(){toggleModal(t)},1e3),setTimeout(function(){a.fadeOut("slow")},1e3)},updatePassword=function(e){var t=$(e).attr("action"),a=$(e).serialize();$.post(t,a,function(){}).success(function(t){editSuccess(e,"modal-edit-password")}).fail(function(){})},editUser=function(e){var t=$(e).attr("action"),a=$(e).serialize();$.post(t,a,function(){}).success(function(t){resetForm($(e)),toggleModal("modal-edit-user")}).fail(function(){})},togglePass=function(e,t){t?($(e).removeClass("fail"),$(e).addClass("pass")):($(e).removeClass("pass"),$(e).addClass("fail"))};$(document).ready(function(){$("#btn-create-event, #btn-sign-up, #btn-login").on("click",function(){var e=$(this).attr("data-target");toggleModal(e)}),$("#btn-keep-open").on("click",function(){toggleKeepModalOpen(this)});var e={name:!1,location:!1,type:!1,host:!1,start:!1,end:!1,guests:!1},t={name:"ip-name",location:"ip-location",type:"ip-type",host:"ip-host",start:"ip-start",end:"ip-end",guests:"ip-guest"},a=function(t){for(var a in t)$("#"+t[a]).val()&&"ip-end"!=t[a]?(e[a]=!0,toggleRequired("#"+t[a],!0)):"ip-end"!=t[a]&&(e[a]=!1,toggleRequired("#"+t[a],!1))};$("#form-new-event").on("keyup",function(e){a(t)}),$("#"+t.end).on("blur",function(){$("#"+t.end).val()<=$("#"+t.start).val()?(toggleRequired("#"+t.end,!1),e.end=!1,$("#modal-event").find("#error-message span").text("The end date is the same or earlier than the start date.").fadeIn()):(toggleRequired("#"+t.end,!0),e.end=!0,$("#modal-event").find("#error-message span").fadeOut())}),$("#form-new-event").on("submit",function(t){t.preventDefault();var a=$(this).attr("action"),n=$(this).serialize();if(d(e)){$("#modal-event").find("#error-message span").fadeOut();$(this).serializeArray();$.post(a,n,function(){}).success(function(e){location.reload()}).fail(function(e){})}else $("#modal-event").find("#error-message span").text("Please ensure that all fields are correctly filled out.").fadeIn()});var n={email:!1,password:!1,passwordLength:!1,passwordSymbol:!1,passwordNumber:!1,passwordLower:!1,passwordUpper:!1,passwordMatch:!1};$("#ip-user-name").on("keyup",function(){""==$(this).val()?toggleRequired(this,!1):toggleRequired(this,!0)}),$("#ip-user-email").on("blur",function(){$.post("index/userExists",{email:$(this).val()},function(e){}).success(function(e){n.email=!0,toggleRequired("#ip-user-email",!0),$("#modal-sign-up").find("#error-message span").fadeOut()}).fail(function(e){n.email=!1,$("#modal-sign-up").find("#error-message span").text("That email already exists.").fadeIn(),toggleRequired("#ip-user-email",!1)})});var s=document.querySelector("#ip-user-pass"),o=(document.querySelector("#ip-user-pass-verify"),/[\!\@\#\$\%\^\&\*]/),i=/[0-9]/,l=/[a-z]/,r=/[A-Z]/;$("#ip-user-pass").on("keyup",function(){s.value.length<16?(togglePass("#label-validation #length",!1),n.passwordLength=!1):(togglePass("#label-validation #length",!0),n.passwordLength=!0),o.test(s.value)?(togglePass("#label-validation #symbol",!0),n.passwordSymbol=!0):(togglePass("#label-validation #symbol",!1),n.passwordSymbol=!1),i.test(s.value)?(togglePass("#label-validation #num",!0),n.passwordNumber=!0):(togglePass("#label-validation #num",!1),n.passwordNumber=!1),l.test(s.value)?(togglePass("#label-validation #lower",!0),n.passwordLower=!0):(togglePass("#label-validation #lower",!1),n.passwordLower=!1),r.test(s.value)?(togglePass("#label-validation #cap",!0),n.passwordUpper=!0):(togglePass("#label-validation #cap",!1),n.passwordUpper=!1),""!=s.value?n.password=!0:n.password=!1}),$("#ip-user-pass-verify").on("keyup",function(){var e=$(s).val(),t=$(this).val();e==t?(n.passwordMatch=!0,toggleRequired("#ip-user-pass-verify",!0)):(n.passwordMatch=!1,toggleRequired("#ip-user-pass-verify",!1))}),$("#ip-user-pass-verify").on("blur",function(){requiredVerify("#ip-user-pass-verify")?$("#modal-sign-up").find("#error-message span").fadeOut():$("#modal-sign-up").find("#error-message span").text("The passwords do not match.").fadeIn()});var d=function(e){for(var t in e)if(!e[t])return!1;return!0};$("#form-new-user").on("keyup",function(e){}),$("#form-new-user").on("submit",function(e){e.preventDefault();var t=$(this).attr("action"),a=$(this).serialize();d(n)?($("#modal-sign-up").find("#error-message span").fadeOut(),$.post(t,a,function(){}).success(function(e){0==e&&console.log("Sorry that email is already in use."),$.post("index/login",a,function(e){}).success(function(e){window.location=e}).fail(function(e){})}).fail(function(e){})):$("#modal-sign-up").find("#error-message span").text("Please ensure all fields are correctly filled out.").fadeIn()}),$("#ip-login-email").on("keyup",function(){""==$(this).val()?toggleRequired(this,!1):toggleRequired(this,!0)}),$("#ip-login-password").on("keyup",function(){""==$(this).val()?toggleRequired(this,!1):toggleRequired(this,!0)}),$("#form-login").on("submit",function(e){e.preventDefault();var t=$(this).attr("action"),a=$(this).serialize();$.post(t,a,function(e){}).success(function(e){window.location=e}).fail(function(e){$("#modal-login").find("#error-message span").fadeIn()})}),$("#form-edit-password").on("submit",function(e){e.preventDefault(),updatePassword($(this))}),$("#form-edit-user").on("submit",function(e){e.preventDefault(),updateUser($(this))}),$("#btn-test").on("click",function(){var e=$(this).parents("div").find(".modal-tarp");e.fadeIn("fast"),setTimeout(function(){e.fadeOut("fast")},1e3)})});var copyAndAppend=function(e,t,a,n){var s=$(e).clone().prop("id","event-wrapper-"+t),o=n[0].value,i=n[1].value,l=n[2].value,r=n[3].value,d=n[4].value,u=n[5].value,p=n[6].value,f=n[7].value;s.find("#sample-name").text(o),s.find("#sample-link").text(i),s.find("#sample-type").text(l),s.find("#sample-host").text(r),s.find("#sample-start").text(d),s.find("#sample-end").text(u),s.find("#sample-details").text(f),s.find("#sample-guests").text(p);var c=s.find("#sample-link"),g=c.attr("href");c.attr("href",g+i);$("#empty-events").hide(),$(s).appendTo(a)},toggleRequired=function(e,t){var a=$(e).siblings("#label-validation").children();$(a).hasClass("fail")&&t?(a.removeClass("fail"),a.addClass("pass")):$(a).hasClass("pass")&&!t&&(a.removeClass("pass"),a.addClass("fail"))},requiredVerify=function(e){var t=$(e).siblings("#label-validation").children();return $(t).hasClass("fail")?!1:$(t).hasClass("pass")?!0:void 0};